webpackJsonp([2,0],{0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(3),i=o(r),s=n(70),l=o(s),u=n(38),a=o(u);new i.default({el:"#app",router:a.default,template:"<App/>",components:{App:l.default}})},12:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r);i.default.defaults.timeout=3e3,i.default.interceptors.request.use(function(e){return e.url=encodeURI(e.url),e},function(e){return Promise.reject(e)}),i.default.interceptors.response.use(function(e){return 200!==e.data.code?(window.alert("数据返回有误"),Promise.reject(e)):e},function(e){var t=e.config.errorTip,n=void 0===t||t;return"ECONNABORTED"===e.code,console.log("promise error:"+e),n&&window.alert("服务器错误"),Promise.reject(e)}),t.default=i.default},37:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{scroller:{}},mounted:function(){this.$bindScroll()},methods:{$bindScroll:function(){var e=this,t=this.scroller||window;this._handleScroll=function(t){e.onScroll&&e.onScroll()},t.addEventListener("scroll",this._handleScroll)},$unbindScroll:function(e){e=e||this.scroller||window,this._handleScroll&&e.removeEventListener("scroll",this._handleScroll)}},beforeDestroy:function(){this.$unbindScroll()},watch:{scroller:function(e,t){e!==t&&(this.$unbindScroll(t),this.$bindScroll(e))}}}},38:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=o(r),s=n(76),l=o(s);i.default.use(l.default);var u=new l.default({routes:[{path:"/index",component:n(72)},{path:"*",redirect:"/index"}]});t.default=u},39:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.userList=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=n(12),l=o(s),u=!0;u&&n(40);var a=function(e){var t=e.params,n=void 0===t?{type:"guess"}:t,o=r(e,["params"]);return(0,l.default)("/userList",i({params:n},o))};t.userList=a},40:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(18),i=o(r),s=n(12),l=o(s),u=n(66),a=o(u),c=new i.default(l.default,{delayResponse:1e3});c.onGet(/\/userList.*/).reply(function(e){var t=e.params.page;if(t>5)return[200,{code:200,data:[]}];var n=(0,a.default)(50*(t-1),50*t).map(function(e){return{id:e+1,name:e+1}});return[200,{code:200,data:n}]}),e.exports={}},41:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=o(r);t.default=new i.default},42:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=o(r),s=n(41),l=o(s);t.default={data:function(){return{}},mounted:function(){var e=this;l.default.$on("error:network",function(t){i.default.nextTick(function(){console.log(t.message)},e)})},components:{},computed:{}}},43:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=o(r);t.default={name:"infinite-scroll",mixins:[i.default],props:{beforeHeight:{type:Number,default:10},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},methods:{onScroll:function(){var e=this.scroller,t=e===window,n=t?e.scrollY:e.scrollTop,o=t?document.documentElement.scrollHeight||document.body.scrollHeight:e.scrollHeight,r=o-n-this.beforeHeight,i=t?window.innerHeight:e.offsetHeight;this.$emit("update:scrollTop",n),this.loading||this.noMore||r<=i&&this.$emit("load")}},components:{}}},44:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),i=n(71),s=o(i),l=n(67),u=o(l);t.default={components:{infiniteScroll:s.default},data:function(){return{userList:[],page:1,loading:!1,noMore:!1,scroller:null,scrollTop:0,previewPer:1,boxHeight:400,showList:[!0],emptyHeight:{top:0,bottom:0}}},created:function(){},mounted:function(){this.loadUser(),this.scroller=this.$el},methods:{loadUser:function(){var e=this;this.loading=!0,(0,r.userList)({errorTip:!0,params:{page:this.page}}).then(function(t){var n=t.data.data;n.length?(e.userList=e.userList.concat(n),e.page++):e.noMore=!0,e.loading=!1})},renderBox:(0,u.default)(function(){var e=this,t=this.scrollTop,n=this.previewPer,o=this.boxHeight,r=-n*o+t,i=(1+n)*o+t,s=0,l=0;this.contentHeight.reduce(function(t,n,o){var u=t+n;return u<r?(e.showList[o]=!1,s+=n):u>i?(e.showList[o]=!1,l=n+l):e.showList[o]=!0,u},0),this.emptyHeight={top:s,bottom:l}},300)},computed:{contentHeight:function(){return this.userList.map(function(){return 56}).concat(40)}},watch:{scrollTop:function(){this.renderBox()},contentHeight:function(){this.renderBox()}}}},48:function(e,t){},49:function(e,t){},70:function(e,t,n){var o=n(5)(n(42),n(75),null,null);e.exports=o.exports},71:function(e,t,n){n(49);var o=n(5)(n(43),n(74),null,null);e.exports=o.exports},72:function(e,t,n){n(48);var o=n(5)(n(44),n(73),"data-v-4296ec7d",null);e.exports=o.exports},73:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"abc",staticClass:"default-view"},[n("div",{staticClass:"empty-box",style:{height:e.emptyHeight.top+"px"}}),e._v(" "),e._l(e.userList,function(t,o){return n("div",{key:t.id,staticClass:"user-item",class:{hide:!e.showList[o]}},[e._t("default",[e._v("\n      "+e._s(t.id)+"\n    ")])],2)}),e._v(" "),n("div",{staticClass:"bot-box",class:{hide:!e.showList[e.showList.length-1]}},[e._t("default",[n("infinite-scroll",{attrs:{scroller:e.scroller,noMore:e.noMore,loading:e.loading},on:{load:e.loadUser,"update:scrollTop":function(t){return e.scrollTop=t}}},[n("div",{staticClass:"loading-text",slot:"loading"},[e._v("我在加载中啊")]),e._v(" "),n("div",{staticClass:"loading-text",slot:"noMore"},[e._v("没有了哦")])])])],2),e._v(" "),n("div",{staticClass:"empty-box",style:{height:e.emptyHeight.bottom+"px"}})],2)},staticRenderFns:[]}},74:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mu-infinite-scroll"},[n("div",{class:{hide:!e.loading}},[e._t("loading")],2),e._v(" "),n("div",{class:{hide:!e.noMore}},[e._t("noMore")],2)])},staticRenderFns:[]}},75:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("keep-alive",[n("router-view")],1)],1)},staticRenderFns:[]}}});